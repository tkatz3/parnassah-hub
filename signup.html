<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Join ParnassaHub — create a free account to browse and apply to jobs, or post openings for your company." />
  <meta property="og:title" content="Join ParnassaHub — Sign Up" />
  <meta property="og:description" content="Create a free account to find meaningful work or post jobs in Greater Union County NJ and beyond." />
  <meta property="og:type" content="website" />
  <title>Join ParnassaHub — Sign Up</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              50: '#ebf3ff', 100: '#d6e8ff', 200: '#add0ff',
              300: '#85b8ff', 400: '#5c9ef5', 500: '#2877C9',
              600: '#1d62aa', 700: '#154d8b',
            }
          },
          fontFamily: { sans: ['Nunito', 'system-ui', 'sans-serif'] }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
  <style>
    body { font-family: 'Nunito', system-ui, sans-serif; }
    input:focus, textarea:focus, select:focus { outline:none; }
    .role-card { transition: border-color .2s, box-shadow .2s, background .2s; }
    .role-card.selected { border-color: #2877C9; background: #ebf3ff; box-shadow: 0 0 0 3px rgba(40,119,201,.15); }
    .step-dot { transition: background .3s, transform .3s; }
    .field-wrap:focus-within label { color: #2877C9; }
    .pwd-wrap { position: relative; }
    .pwd-wrap input { padding-right: 2.75rem; }
    .pwd-toggle { position:absolute;right:10px;top:50%;transform:translateY(-50%);cursor:pointer;color:#9ca3af;background:none;border:none;padding:4px; }
    .pwd-toggle:hover { color:#6b7280; }
  </style>
</head>
<body class="bg-gray-50 text-gray-900 antialiased min-h-screen flex flex-col">

<!-- TOP BAR -->
<header class="bg-white border-b border-gray-100 py-4 px-6 flex items-center justify-between">
  <a href="index.html">
    <img src="parnassah hub.png" alt="ParnassaHub" class="h-14 w-auto" />
  </a>
  <p class="text-sm text-gray-500">Already have an account? <a href="#" onclick="showSignIn()" class="text-brand-500 hover:text-brand-600 font-medium">Sign in</a></p>
</header>

<!-- MAIN -->
<main class="flex-1 flex items-start justify-center py-10 px-4">
  <div class="w-full max-w-lg">

    <!-- ERROR BANNER -->
    <div id="error-banner" class="hidden mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-sm text-red-700"></div>

    <!-- SIGN IN SCREEN -->
    <div id="screen-signin" class="hidden">
      <div class="text-center mb-8">
        <h1 class="text-2xl font-extrabold text-gray-900 mb-2">Welcome back</h1>
        <p class="text-gray-500 text-sm">Sign in to your ParnassaHub account</p>
      </div>
      <div class="bg-white rounded-2xl border border-gray-200 p-6 space-y-4">
        <div class="field-wrap">
          <label class="block text-xs font-medium text-gray-600 mb-1.5">Email Address</label>
          <input id="signin-email" type="email" placeholder="you@example.com" class="w-full px-3.5 py-2.5 border border-gray-200 rounded-xl text-sm focus:border-brand-400 transition" />
        </div>
        <div class="field-wrap">
          <label class="block text-xs font-medium text-gray-600 mb-1.5">Password</label>
          <div class="pwd-wrap">
            <input id="signin-password" type="password" placeholder="Your password" class="w-full px-3.5 py-2.5 border border-gray-200 rounded-xl text-sm focus:border-brand-400 transition" />
            <button type="button" class="pwd-toggle" onclick="togglePwd('signin-password', this)" aria-label="Show password">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>
            </button>
          </div>
        </div>
        <button onclick="doSignIn()" id="signin-btn" class="w-full py-3.5 bg-brand-500 hover:bg-brand-600 text-white font-semibold text-sm rounded-xl transition">
          Sign In
        </button>
        <div class="flex items-center justify-between text-xs text-gray-500">
          <span>Don't have an account? <a href="#" onclick="showSignUp()" class="text-brand-500 font-medium">Sign up</a></span>
          <a href="#" onclick="showForgotPassword()" class="text-brand-500 font-medium hover:text-brand-600">Forgot password?</a>
        </div>
      </div>
    </div>

    <!-- FORGOT PASSWORD SCREEN -->
    <div id="screen-forgot" class="hidden">
      <div class="text-center mb-8">
        <h1 class="text-2xl font-extrabold text-gray-900 mb-2">Reset your password</h1>
        <p class="text-gray-500 text-sm">Enter your email and we'll send you a reset link.</p>
      </div>
      <div id="forgot-form" class="bg-white rounded-2xl border border-gray-200 p-6 space-y-4">
        <div class="field-wrap">
          <label class="block text-xs font-medium text-gray-600 mb-1.5">Email Address</label>
          <input id="forgot-email" type="email" placeholder="you@example.com" class="w-full px-3.5 py-2.5 border border-gray-200 rounded-xl text-sm focus:border-brand-400 transition" />
        </div>
        <button onclick="doForgotPassword()" id="forgot-btn" class="w-full py-3.5 bg-brand-500 hover:bg-brand-600 text-white font-semibold text-sm rounded-xl transition">
          Send Reset Link
        </button>
        <p class="text-center text-xs text-gray-500"><a href="#" onclick="showSignIn()" class="text-brand-500 font-medium">Back to sign in</a></p>
      </div>
      <div id="forgot-success" class="hidden bg-white rounded-2xl border border-gray-200 p-8 text-center">
        <div class="w-16 h-16 rounded-full bg-brand-50 flex items-center justify-center mx-auto mb-4">
          <svg class="w-8 h-8 text-brand-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
        </div>
        <h2 class="text-xl font-bold text-gray-900 mb-2">Check your email!</h2>
        <p class="text-sm text-gray-500 mb-6">We sent a reset link to <strong id="forgot-confirm-email"></strong>. Check your spam folder if you don't see it.</p>
        <button onclick="showSignIn()" class="w-full inline-flex items-center justify-center py-3 border border-gray-200 text-gray-600 text-sm font-medium rounded-xl hover:bg-gray-50 transition">Back to Sign In</button>
      </div>
    </div>

    <!-- SCREEN 1: ROLE SELECTION -->
    <div id="screen-role">
      <div class="text-center mb-8">
        <h1 class="text-2xl sm:text-3xl font-extrabold text-gray-900 mb-2">Join ParnassaHub</h1>
        <p class="text-gray-500 text-sm">Who are you signing up as?</p>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
        <button id="roleSeeker" onclick="selectRole('seeker')" class="role-card group border-2 border-gray-200 rounded-2xl p-6 text-left hover:border-brand-300 transition cursor-pointer">
          <div class="w-12 h-12 rounded-xl bg-brand-50 flex items-center justify-center mb-4 group-hover:bg-brand-100 transition">
            <svg class="w-6 h-6 text-brand-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
          </div>
          <h3 class="font-bold text-gray-900 mb-1">Job Seeker</h3>
          <p class="text-sm text-gray-500 leading-snug">I'm looking for work and want to browse &amp; apply to jobs.</p>
        </button>

        <button id="roleEmployer" onclick="selectRole('employer')" class="role-card group border-2 border-gray-200 rounded-2xl p-6 text-left hover:border-brand-300 transition cursor-pointer">
          <div class="w-12 h-12 rounded-xl bg-brand-50 flex items-center justify-center mb-4 group-hover:bg-brand-100 transition">
            <svg class="w-6 h-6 text-brand-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>
          </div>
          <h3 class="font-bold text-gray-900 mb-1">Employer</h3>
          <p class="text-sm text-gray-500 leading-snug">I represent a company and want to post jobs &amp; find candidates.</p>
        </button>
      </div>

      <button id="continueBtn" onclick="continueToForm()" disabled
        class="w-full py-3.5 bg-brand-500 text-white font-semibold text-sm rounded-xl transition disabled:opacity-40 disabled:cursor-not-allowed hover:bg-brand-600">
        Continue
      </button>
    </div>

    <!-- SCREEN 2A: JOB SEEKER FORM -->
    <div id="screen-seeker" class="hidden">
      <div class="flex items-center justify-center gap-2 mb-8" role="progressbar" aria-label="Sign up progress">
        <div id="dot1s" class="step-dot w-2 h-2 rounded-full bg-brand-500" aria-label="Step 1: Personal info"></div>
        <div id="dot2s" class="step-dot w-2 h-2 rounded-full bg-gray-200" aria-label="Step 2: Preferences"></div>
        <div id="dot3s" class="step-dot w-2 h-2 rounded-full bg-gray-200" aria-label="Step 3: Confirmation"></div>
      </div>

      <div class="text-center mb-8">
        <button onclick="goBack()" class="inline-flex items-center gap-1.5 text-xs text-gray-500 hover:text-gray-700 mb-4">
          <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg> Back
        </button>
        <h1 class="text-2xl font-extrabold text-gray-900 mb-1">Create your profile</h1>
        <p class="text-sm text-gray-500">Step <span id="seekerStep">1</span> of 3</p>
      </div>

      <!-- Step 1: Basic Info -->
      <div id="seeker-step-1" class="space-y-4">
        <div class="bg-white rounded-2xl border border-gray-200 p-6 space-y-4">
          <h3 class="text-sm font-semibold text-gray-700">Personal Information</h3>
          <div class="grid grid-cols-2 gap-3">
            <div class="field-wrap">
              <label class="block text-xs font-medium text-gray-600 mb-1.5">First Name *</label>
              <input id="s-first" type="text" placeholder="Moshe" class="w-full px-3.5 py-2.5 border border-gray-200 rounded-xl text-sm focus:border-brand-400 transition" />
            </div>
            <div class="field-wrap">
              <label class="block text-xs font-medium text-gray-600 mb-1.5">Last Name *</label>
              <input id="s-last" type="text" placeholder="Cohen" class="w-full px-3.5 py-2.5 border border-gray-200 rounded-xl text-sm focus:border-brand-400 transition" />
            </div>
          </div>
          <div class="field-wrap">
            <label class="block text-xs font-medium text-gray-600 mb-1.5">Email Address *</label>
            <input id="s-email" type="email" placeholder="moshe@example.com" class="w-full px-3.5 py-2.5 border border-gray-200 rounded-xl text-sm focus:border-brand-400 transition" />
          </div>
          <div class="field-wrap">
            <label class="block text-xs font-medium text-gray-600 mb-1.5">Phone Number</label>
            <input id="s-phone" type="tel" placeholder="(908) 555-0123" class="w-full px-3.5 py-2.5 border border-gray-200 rounded-xl text-sm focus:border-brand-400 transition" />
          </div>
          <div class="field-wrap">
            <label class="block text-xs font-medium text-gray-600 mb-1.5">Password *</label>
            <div class="pwd-wrap">
              <input id="s-password" type="password" placeholder="Min. 8 characters" class="w-full px-3.5 py-2.5 border border-gray-200 rounded-xl text-sm focus:border-brand-400 transition" />
              <button type="button" class="pwd-toggle" onclick="togglePwd('s-password', this)" aria-label="Show password">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>
              </button>
            </div>
          </div>
          <div class="field-wrap">
            <label class="block text-xs font-medium text-gray-600 mb-1.5">Confirm Password *</label>
            <div class="pwd-wrap">
              <input id="s-password-confirm" type="password" placeholder="Repeat your password" class="w-full px-3.5 py-2.5 border border-gray-200 rounded-xl text-sm focus:border-brand-400 transition" />
              <button type="button" class="pwd-toggle" onclick="togglePwd('s-password-confirm', this)" aria-label="Show confirm password">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>
              </button>
            </div>
          </div>
        </div>
        <button onclick="seekerNextStep(2)" class="w-full py-3.5 bg-brand-500 hover:bg-brand-600 text-white font-semibold text-sm rounded-xl transition">Continue →</button>
      </div>

      <!-- Step 2: Preferences -->
      <div id="seeker-step-2" class="space-y-4 hidden">
        <div class="bg-white rounded-2xl border border-gray-200 p-6 space-y-5">
          <h3 class="text-sm font-semibold text-gray-700">Job Preferences</h3>

          <div>
            <label class="block text-xs font-medium text-gray-600 mb-2">Job Categories of Interest</label>
            <div class="grid grid-cols-2 gap-2">
              <label class="flex items-center gap-2 text-xs text-gray-700 cursor-pointer p-2 rounded-lg border border-gray-200 hover:border-brand-300 hover:bg-brand-50/50 transition"><input type="checkbox" class="pref-cat w-3.5 h-3.5" style="accent-color:#2877C9" value="Accounting &amp; Auditing" />Accounting &amp; Auditing</label>
              <label class="flex items-center gap-2 text-xs text-gray-700 cursor-pointer p-2 rounded-lg border border-gray-200 hover:border-brand-300 hover:bg-brand-50/50 transition"><input type="checkbox" class="pref-cat w-3.5 h-3.5" style="accent-color:#2877C9" value="Admin Support" />Admin Support</label>
              <label class="flex items-center gap-2 text-xs text-gray-700 cursor-pointer p-2 rounded-lg border border-gray-200 hover:border-brand-300 hover:bg-brand-50/50 transition"><input type="checkbox" class="pref-cat w-3.5 h-3.5" style="accent-color:#2877C9" value="Finance &amp; Banking" />Finance &amp; Banking</label>
              <label class="flex items-center gap-2 text-xs text-gray-700 cursor-pointer p-2 rounded-lg border border-gray-200 hover:border-brand-300 hover:bg-brand-50/50 transition"><input type="checkbox" class="pref-cat w-3.5 h-3.5" style="accent-color:#2877C9" value="Sales &amp; Marketing" />Sales &amp; Marketing</label>
              <label class="flex items-center gap-2 text-xs text-gray-700 cursor-pointer p-2 rounded-lg border border-gray-200 hover:border-brand-300 hover:bg-brand-50/50 transition"><input type="checkbox" class="pref-cat w-3.5 h-3.5" style="accent-color:#2877C9" value="Real Estate" />Real Estate</label>
              <label class="flex items-center gap-2 text-xs text-gray-700 cursor-pointer p-2 rounded-lg border border-gray-200 hover:border-brand-300 hover:bg-brand-50/50 transition"><input type="checkbox" class="pref-cat w-3.5 h-3.5" style="accent-color:#2877C9" value="Operations" />Operations</label>
              <label class="flex items-center gap-2 text-xs text-gray-700 cursor-pointer p-2 rounded-lg border border-gray-200 hover:border-brand-300 hover:bg-brand-50/50 transition"><input type="checkbox" class="pref-cat w-3.5 h-3.5" style="accent-color:#2877C9" value="Education" />Education</label>
              <label class="flex items-center gap-2 text-xs text-gray-700 cursor-pointer p-2 rounded-lg border border-gray-200 hover:border-brand-300 hover:bg-brand-50/50 transition"><input type="checkbox" class="pref-cat w-3.5 h-3.5" style="accent-color:#2877C9" value="Human Resources" />Human Resources</label>
            </div>
          </div>

          <div>
            <label class="block text-xs font-medium text-gray-600 mb-2">Preferred Locations</label>
            <div class="grid grid-cols-2 gap-2" id="pref-locs-checks">
              <label class="flex items-center gap-2 text-xs text-gray-700 cursor-pointer p-2 rounded-lg border border-gray-200 hover:border-brand-300 hover:bg-brand-50/50 transition"><input type="checkbox" class="pref-loc w-3.5 h-3.5" style="accent-color:#2877C9" value="Greater Lakewood Area" />Greater Lakewood Area</label>
              <label class="flex items-center gap-2 text-xs text-gray-700 cursor-pointer p-2 rounded-lg border border-gray-200 hover:border-brand-300 hover:bg-brand-50/50 transition"><input type="checkbox" class="pref-loc w-3.5 h-3.5" style="accent-color:#2877C9" value="Hillside NJ" />Hillside NJ</label>
              <label class="flex items-center gap-2 text-xs text-gray-700 cursor-pointer p-2 rounded-lg border border-gray-200 hover:border-brand-300 hover:bg-brand-50/50 transition"><input type="checkbox" class="pref-loc w-3.5 h-3.5" style="accent-color:#2877C9" value="Linden NJ" />Linden NJ</label>
              <label class="flex items-center gap-2 text-xs text-gray-700 cursor-pointer p-2 rounded-lg border border-gray-200 hover:border-brand-300 hover:bg-brand-50/50 transition"><input type="checkbox" class="pref-loc w-3.5 h-3.5" style="accent-color:#2877C9" value="Monsey" />Monsey</label>
              <label class="flex items-center gap-2 text-xs text-gray-700 cursor-pointer p-2 rounded-lg border border-gray-200 hover:border-brand-300 hover:bg-brand-50/50 transition"><input type="checkbox" class="pref-loc w-3.5 h-3.5" style="accent-color:#2877C9" value="New Jersey" />New Jersey</label>
              <label class="flex items-center gap-2 text-xs text-gray-700 cursor-pointer p-2 rounded-lg border border-gray-200 hover:border-brand-300 hover:bg-brand-50/50 transition"><input type="checkbox" class="pref-loc w-3.5 h-3.5" style="accent-color:#2877C9" value="New York City" />New York City</label>
              <label class="flex items-center gap-2 text-xs text-gray-700 cursor-pointer p-2 rounded-lg border border-gray-200 hover:border-brand-300 hover:bg-brand-50/50 transition"><input type="checkbox" class="pref-loc w-3.5 h-3.5" style="accent-color:#2877C9" value="Newark" />Newark</label>
              <label class="flex items-center gap-2 text-xs text-gray-700 cursor-pointer p-2 rounded-lg border border-gray-200 hover:border-brand-300 hover:bg-brand-50/50 transition"><input type="checkbox" class="pref-loc w-3.5 h-3.5" style="accent-color:#2877C9" value="Remote" />Remote</label>
              <label class="flex items-center gap-2 text-xs text-gray-700 cursor-pointer p-2 rounded-lg border border-gray-200 hover:border-brand-300 hover:bg-brand-50/50 transition"><input type="checkbox" class="pref-loc w-3.5 h-3.5" style="accent-color:#2877C9" value="Union County" />Union County</label>
              <label class="flex items-center gap-2 text-xs text-gray-700 cursor-pointer p-2 rounded-lg border border-gray-200 hover:border-brand-300 hover:bg-brand-50/50 transition"><input type="checkbox" class="pref-loc w-3.5 h-3.5" style="accent-color:#2877C9" value="Worldwide" />Worldwide</label>
            </div>
          </div>

          <div>
            <label class="block text-xs font-medium text-gray-600 mb-2">Looking for</label>
            <div class="flex flex-wrap gap-2">
              <label class="flex items-center gap-1.5 cursor-pointer text-xs border border-gray-200 rounded-full px-3 py-1.5 hover:border-brand-300 hover:bg-brand-50 transition"><input type="checkbox" class="pref-type w-3 h-3" style="accent-color:#2877C9" value="Full Time" /> Full Time</label>
              <label class="flex items-center gap-1.5 cursor-pointer text-xs border border-gray-200 rounded-full px-3 py-1.5 hover:border-brand-300 hover:bg-brand-50 transition"><input type="checkbox" class="pref-type w-3 h-3" style="accent-color:#2877C9" value="Part-Time" /> Part-Time</label>
              <label class="flex items-center gap-1.5 cursor-pointer text-xs border border-gray-200 rounded-full px-3 py-1.5 hover:border-brand-300 hover:bg-brand-50 transition"><input type="checkbox" class="pref-type w-3 h-3" style="accent-color:#2877C9" value="Commission" /> Commission</label>
              <label class="flex items-center gap-1.5 cursor-pointer text-xs border border-gray-200 rounded-full px-3 py-1.5 hover:border-brand-300 hover:bg-brand-50 transition"><input type="checkbox" class="pref-type w-3 h-3" style="accent-color:#2877C9" value="Volunteer" /> Volunteer</label>
            </div>
          </div>
        </div>

<div class="flex gap-3">
          <button onclick="seekerNextStep(1)" class="flex-1 py-3.5 border border-gray-200 text-gray-600 font-semibold text-sm rounded-xl hover:bg-gray-50 transition">← Back</button>
          <button id="seeker-submit-btn" onclick="registerSeeker()" class="flex-1 py-3.5 bg-brand-500 hover:bg-brand-600 text-white font-semibold text-sm rounded-xl transition">Create Account →</button>
        </div>
      </div>

      <!-- Step 3: Check Email -->
      <div id="seeker-step-3" class="space-y-4 hidden">
        <div class="bg-white rounded-2xl border border-gray-200 p-8 text-center">
          <div class="w-16 h-16 rounded-full bg-brand-50 flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-brand-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
          </div>
          <h2 class="text-xl font-bold text-gray-900 mb-2">Check your email!</h2>
          <p class="text-sm text-gray-500 mb-2">We sent a confirmation link to <strong id="seeker-confirm-email"></strong>.</p>
          <p class="text-sm text-gray-500 mb-6">Click the link to confirm your account, then sign in.</p>
          <a href="find-jobs.html" class="w-full inline-flex items-center justify-center py-3.5 bg-brand-500 hover:bg-brand-600 text-white font-semibold text-sm rounded-xl transition mb-3">Browse Jobs While You Wait</a>
          <button onclick="showSignIn()" class="w-full inline-flex items-center justify-center py-3 border border-gray-200 text-gray-600 text-sm font-medium rounded-xl hover:bg-gray-50 transition">Sign In After Confirming</button>
        </div>
      </div>
    </div>

    <!-- SCREEN 2B: EMPLOYER FORM -->
    <div id="screen-employer" class="hidden">
      <div class="flex items-center justify-center gap-2 mb-8" role="progressbar" aria-label="Sign up progress">
        <div id="dot1e" class="step-dot w-2 h-2 rounded-full bg-brand-500" aria-label="Step 1: Company details"></div>
        <div id="dot2e" class="step-dot w-2 h-2 rounded-full bg-gray-200" aria-label="Step 2: Contact person"></div>
        <div id="dot3e" class="step-dot w-2 h-2 rounded-full bg-gray-200" aria-label="Step 3: Confirmation"></div>
      </div>

      <div class="text-center mb-8">
        <button onclick="goBack()" class="inline-flex items-center gap-1.5 text-xs text-gray-500 hover:text-gray-700 mb-4">
          <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg> Back
        </button>
        <h1 class="text-2xl font-extrabold text-gray-900 mb-1">Register your company</h1>
        <p class="text-sm text-gray-500">Step <span id="employerStep">1</span> of 3</p>
      </div>

      <!-- Step 1: Company Info -->
      <div id="employer-step-1" class="space-y-4">
        <div class="bg-white rounded-2xl border border-gray-200 p-6 space-y-4">
          <h3 class="text-sm font-semibold text-gray-700">Company Details</h3>
          <div class="field-wrap">
            <label class="block text-xs font-medium text-gray-600 mb-1.5">Company Name *</label>
            <input id="e-company" type="text" placeholder="Acme Corp Ltd." class="w-full px-3.5 py-2.5 border border-gray-200 rounded-xl text-sm focus:border-brand-400 transition" />
          </div>
          <div class="field-wrap">
            <label class="block text-xs font-medium text-gray-600 mb-1.5">Company Website</label>
            <input id="e-website" type="url" placeholder="https://www.company.com" class="w-full px-3.5 py-2.5 border border-gray-200 rounded-xl text-sm focus:border-brand-400 transition" />
          </div>
          <div class="field-wrap">
            <label class="block text-xs font-medium text-gray-600 mb-1.5">Industry *</label>
            <select id="e-industry" class="w-full px-3.5 py-2.5 border border-gray-200 rounded-xl text-sm focus:border-brand-400 focus:outline-none transition appearance-none">
              <option value="" disabled selected>Select an industry…</option>
              <option>Accounting &amp; Finance</option><option>Education</option><option>Healthcare</option>
              <option>Human Resources</option><option>Marketing &amp; Advertising</option>
              <option>Operations &amp; Logistics</option><option>Real Estate</option>
              <option>Retail &amp; Sales</option><option>Religious / Non-Profit</option>
              <option>Technology</option><option>Transportation</option><option>Other</option>
            </select>
          </div>
          <div class="field-wrap">
            <label class="block text-xs font-medium text-gray-600 mb-1.5">Company Description</label>
            <textarea id="e-desc" placeholder="Brief description of your company and culture…" rows="3" class="w-full px-3.5 py-2.5 border border-gray-200 rounded-xl text-sm focus:border-brand-400 transition resize-none"></textarea>
          </div>
        </div>
        <button onclick="employerNextStep(2)" class="w-full py-3.5 bg-brand-500 hover:bg-brand-600 text-white font-semibold text-sm rounded-xl transition">Continue →</button>
      </div>

      <!-- Step 2: Contact Person -->
      <div id="employer-step-2" class="space-y-4 hidden">
        <div class="bg-white rounded-2xl border border-gray-200 p-6 space-y-4">
          <h3 class="text-sm font-semibold text-gray-700">Contact Person</h3>
          <div class="grid grid-cols-2 gap-3">
            <div class="field-wrap">
              <label class="block text-xs font-medium text-gray-600 mb-1.5">First Name *</label>
              <input id="e-first" type="text" placeholder="Yosef" class="w-full px-3.5 py-2.5 border border-gray-200 rounded-xl text-sm focus:border-brand-400 transition" />
            </div>
            <div class="field-wrap">
              <label class="block text-xs font-medium text-gray-600 mb-1.5">Last Name *</label>
              <input id="e-last" type="text" placeholder="Levy" class="w-full px-3.5 py-2.5 border border-gray-200 rounded-xl text-sm focus:border-brand-400 transition" />
            </div>
          </div>
          <div class="field-wrap">
            <label class="block text-xs font-medium text-gray-600 mb-1.5">Business Email *</label>
            <input id="e-email" type="email" placeholder="yosef@company.com" class="w-full px-3.5 py-2.5 border border-gray-200 rounded-xl text-sm focus:border-brand-400 transition" />
          </div>
          <div class="field-wrap">
            <label class="block text-xs font-medium text-gray-600 mb-1.5">Phone Number</label>
            <input id="e-phone" type="tel" placeholder="(908) 555-0100" class="w-full px-3.5 py-2.5 border border-gray-200 rounded-xl text-sm focus:border-brand-400 transition" />
          </div>
          <div class="field-wrap">
            <label class="block text-xs font-medium text-gray-600 mb-1.5">Password *</label>
            <div class="pwd-wrap">
              <input id="e-password" type="password" placeholder="Min. 8 characters" class="w-full px-3.5 py-2.5 border border-gray-200 rounded-xl text-sm focus:border-brand-400 transition" />
              <button type="button" class="pwd-toggle" onclick="togglePwd('e-password', this)" aria-label="Show password">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>
              </button>
            </div>
          </div>
          <div class="field-wrap">
            <label class="block text-xs font-medium text-gray-600 mb-1.5">Confirm Password *</label>
            <div class="pwd-wrap">
              <input id="e-password-confirm" type="password" placeholder="Repeat your password" class="w-full px-3.5 py-2.5 border border-gray-200 rounded-xl text-sm focus:border-brand-400 transition" />
              <button type="button" class="pwd-toggle" onclick="togglePwd('e-password-confirm', this)" aria-label="Show confirm password">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>
              </button>
            </div>
          </div>
        </div>
<div class="flex gap-3">
          <button onclick="employerNextStep(1)" class="flex-1 py-3.5 border border-gray-200 text-gray-600 font-semibold text-sm rounded-xl hover:bg-gray-50 transition">← Back</button>
          <button id="employer-submit-btn" onclick="registerEmployer()" class="flex-1 py-3.5 bg-brand-500 hover:bg-brand-600 text-white font-semibold text-sm rounded-xl transition">Create Account →</button>
        </div>
      </div>

      <!-- Step 3: Check Email -->
      <div id="employer-step-3" class="space-y-4 hidden">
        <div class="bg-white rounded-2xl border border-gray-200 p-8 text-center">
          <div class="w-16 h-16 rounded-full bg-brand-50 flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-brand-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
          </div>
          <h2 class="text-xl font-bold text-gray-900 mb-2">Check your email!</h2>
          <p class="text-sm text-gray-500 mb-2">We sent a confirmation link to <strong id="employer-confirm-email"></strong>.</p>
          <p class="text-sm text-gray-500 mb-6">Click the link in your email to confirm your account, then sign in to post jobs.</p>
          <button onclick="showSignIn()" class="w-full inline-flex items-center justify-center py-3.5 bg-brand-500 hover:bg-brand-600 text-white font-semibold text-sm rounded-xl transition mb-3">Sign In After Confirming</button>
          <a href="find-jobs.html" class="w-full inline-flex items-center justify-center py-3 border border-gray-200 text-gray-600 text-sm font-medium rounded-xl hover:bg-gray-50 transition">Browse the Job Board</a>
        </div>
      </div>
    </div>

  </div>
</main>

<footer class="text-center py-6 text-xs text-gray-400">
  &copy; 2026 ParnassaHub &middot; Volunteer-run &middot;
  <a href="about.html" class="hover:text-gray-600">About</a> &middot;
  <a href="mailto:info@parnassahub.com" class="hover:text-gray-600">Contact</a> &middot;
  Sponsored by <a href="https://omrgroup.net" class="hover:text-gray-600">ORTEK Group</a>
</footer>

<script src="js/supabase-client.js"></script>
<script>
  function togglePwd(inputId, btn) {
    const input = document.getElementById(inputId)
    const isText = input.type === 'text'
    input.type = isText ? 'password' : 'text'
    btn.setAttribute('aria-label', isText ? 'Show password' : 'Hide password')
    // Swap eye icon
    btn.innerHTML = isText
      ? '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>'
      : '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"/></svg>'
  }

  let currentRole = null

  function showError(msg) {
    const el = document.getElementById('error-banner')
    el.textContent = msg
    el.classList.remove('hidden')
    window.scrollTo(0,0)
  }
  function clearError() { document.getElementById('error-banner').classList.add('hidden') }

  function showSignIn() {
    ;['screen-role','screen-seeker','screen-employer','screen-forgot'].forEach(id => document.getElementById(id).classList.add('hidden'))
    document.getElementById('screen-signin').classList.remove('hidden')
  }
  function showSignUp() {
    document.getElementById('screen-signin').classList.add('hidden')
    document.getElementById('screen-role').classList.remove('hidden')
  }
  function showForgotPassword() {
    ;['screen-signin','screen-role','screen-seeker','screen-employer'].forEach(id => document.getElementById(id).classList.add('hidden'))
    document.getElementById('screen-forgot').classList.remove('hidden')
    document.getElementById('forgot-form').classList.remove('hidden')
    document.getElementById('forgot-success').classList.add('hidden')
    document.getElementById('forgot-email').value = document.getElementById('signin-email').value
  }

  async function doForgotPassword() {
    clearError()
    const email = document.getElementById('forgot-email').value.trim()
    if (!email) { showError('Please enter your email address.'); return }
    const btn = document.getElementById('forgot-btn')
    btn.textContent = 'Sending…'; btn.disabled = true
    const { error } = await sb.auth.resetPasswordForEmail(email, {
      redirectTo: window.location.origin + '/reset-password.html'
    })
    btn.textContent = 'Send Reset Link'; btn.disabled = false
    if (error) { showError(error.message); return }
    document.getElementById('forgot-confirm-email').textContent = email
    document.getElementById('forgot-form').classList.add('hidden')
    document.getElementById('forgot-success').classList.remove('hidden')
  }

  async function doSignIn() {
    clearError()
    const email    = document.getElementById('signin-email').value.trim()
    const password = document.getElementById('signin-password').value
    if (!email || !password) { showError('Please enter your email and password.'); return }
    const btn = document.getElementById('signin-btn')
    btn.textContent = 'Signing in…'; btn.disabled = true
    const { error } = await sb.auth.signInWithPassword({ email, password })
    if (error) {
      showError(error.message)
      btn.textContent = 'Sign In'; btn.disabled = false
      return
    }
    const profile = await getCurrentProfile()
    window.location.href = profile?.role === 'admin' ? 'admin.html' : profile?.role === 'employer' ? 'employer-dashboard.html' : 'jobseeker-dashboard.html'
  }

  function selectRole(role) {
    currentRole = role
    document.getElementById('roleSeeker').classList.toggle('selected', role === 'seeker')
    document.getElementById('roleEmployer').classList.toggle('selected', role === 'employer')
    document.getElementById('continueBtn').disabled = false
  }

  function continueToForm() {
    document.getElementById('screen-role').classList.add('hidden')
    if (currentRole === 'seeker') document.getElementById('screen-seeker').classList.remove('hidden')
    else document.getElementById('screen-employer').classList.remove('hidden')
  }

  function goBack() {
    document.getElementById('screen-seeker').classList.add('hidden')
    document.getElementById('screen-employer').classList.add('hidden')
    document.getElementById('screen-role').classList.remove('hidden')
  }

  let seekerCurrentStep = 1
  function seekerNextStep(step) {
    document.getElementById('seeker-step-' + seekerCurrentStep).classList.add('hidden')
    document.getElementById('seeker-step-' + step).classList.remove('hidden')
    document.getElementById('seekerStep').textContent = step
    for (let i = 1; i <= 3; i++) {
      const dot = document.getElementById('dot' + i + 's')
      dot.classList.toggle('bg-brand-500', i <= step)
      dot.classList.toggle('bg-gray-200', i > step)
      dot.style.transform = i === step ? 'scale(1.4)' : 'scale(1)'
    }
    seekerCurrentStep = step
  }

  let employerCurrentStep = 1
  function employerNextStep(step) {
    document.getElementById('employer-step-' + employerCurrentStep).classList.add('hidden')
    document.getElementById('employer-step-' + step).classList.remove('hidden')
    document.getElementById('employerStep').textContent = step
    for (let i = 1; i <= 3; i++) {
      const dot = document.getElementById('dot' + i + 'e')
      dot.classList.toggle('bg-brand-500', i <= step)
      dot.classList.toggle('bg-gray-200', i > step)
      dot.style.transform = i === step ? 'scale(1.4)' : 'scale(1)'
    }
    employerCurrentStep = step
  }

  async function registerSeeker() {
    clearError()
    const email    = document.getElementById('s-email').value.trim()
    const password = document.getElementById('s-password').value
    const first    = document.getElementById('s-first').value.trim()
    const last     = document.getElementById('s-last').value.trim()
    const phone    = document.getElementById('s-phone').value.trim()

    const confirm = document.getElementById('s-password-confirm').value
    if (!first || !last || !email || !password) { showError('Please fill in all required fields.'); return }
    if (password.length < 8) { showError('Password must be at least 8 characters.'); return }
    if (password !== confirm) { showError('Passwords do not match.'); return }

    const cats  = [...document.querySelectorAll('.pref-cat:checked')].map(el => el.value)
    const locs  = [...document.querySelectorAll('.pref-loc:checked')].map(el => el.value)
    const types = [...document.querySelectorAll('.pref-type:checked')].map(el => el.value)

    const btn = document.getElementById('seeker-submit-btn')
    btn.textContent = 'Creating account…'; btn.disabled = true

    const { data, error } = await sb.auth.signUp({
      email, password,
      options: { data: { role: 'seeker', first_name: first, last_name: last, phone: phone || null } }
    })
    if (error) { showError(error.message); btn.textContent = 'Create Account →'; btn.disabled = false; return }

    const uid = data.user.id
    // Save seeker prefs if session is available (email confirmation off, e.g. local dev)
    if (data.session) {
      await sb.from('seeker_profiles').insert({
        user_id: uid,
        preferred_categories: cats.length ? cats : null,
        preferred_locations:  locs.length ? locs : null,
        preferred_types:      types.length ? types : null,
      })
    }

    document.getElementById('seeker-confirm-email').textContent = email
    seekerNextStep(3)
  }

  async function registerEmployer() {
    clearError()
    const email    = document.getElementById('e-email').value.trim()
    const password = document.getElementById('e-password').value
    const first    = document.getElementById('e-first').value.trim()
    const last     = document.getElementById('e-last').value.trim()
    const phone    = document.getElementById('e-phone').value.trim()
    const company  = document.getElementById('e-company').value.trim()
    const website  = document.getElementById('e-website').value.trim()
    const industry = document.getElementById('e-industry').value
    const desc     = document.getElementById('e-desc').value.trim()

    const eConfirm = document.getElementById('e-password-confirm').value
    if (!first || !last || !email || !password || !company) { showError('Please fill in all required fields.'); return }
    if (password.length < 8) { showError('Password must be at least 8 characters.'); return }
    if (password !== eConfirm) { showError('Passwords do not match.'); return }

    const btn = document.getElementById('employer-submit-btn')
    btn.textContent = 'Creating account…'; btn.disabled = true

    const { data, error } = await sb.auth.signUp({
      email, password,
      options: { data: { role: 'employer', first_name: first, last_name: last, phone: phone || null } }
    })
    if (error) { showError(error.message); btn.textContent = 'Create Account →'; btn.disabled = false; return }

    const uid = data.user.id
    // Save company if session is available (email confirmation off, e.g. local dev)
    if (data.session) {
      await sb.from('companies').insert({
        user_id: uid,
        name: company,
        website: website || null,
        industry: industry || null,
        description: desc || null,
      })
    }

    document.getElementById('employer-confirm-email').textContent = email
    employerNextStep(3)
  }

  // Handle ?role= and ?view= query params
  const params = new URLSearchParams(window.location.search)
  const roleParam = params.get('role')
  if (roleParam === 'seeker')   { selectRole('seeker');   continueToForm() }
  if (roleParam === 'employer') { selectRole('employer'); continueToForm() }
  if (params.get('view') === 'signin') showSignIn()

  // Redirect if already logged in
  sb.auth.getUser().then(({ data: { user } }) => {
    if (user) getCurrentProfile().then(p => {
      if (p?.role === 'admin') window.location.href = 'admin.html'
      else if (p?.role === 'employer') window.location.href = 'employer-dashboard.html'
      else if (p) window.location.href = 'jobseeker-dashboard.html'
    })
  })
</script>
</body>
</html>
